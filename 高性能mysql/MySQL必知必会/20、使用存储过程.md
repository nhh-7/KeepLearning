### 存储过程
	存储过程简单来说，就是为以后的使用而保存的一条或多条MySQL语句的集合。可将其视为批文件，虽然它们的作用不仅限于批处理。

### 使用存储过程
##### 执行存储过程
	MySQL称存储过程的执行为调用，因此MySQL执行存储过程的语句为CALL。 CALL接受存储过程的名字以及需要传递给它的任意参数。

##### 创建存储过程
	# 创建存储过程
	CREATE PROCEDURE productpricing()
	BEGIN
		SELECT AVG(prod_price) AS priceaverage
		FROM products;
	END;
	# 使用存储过程
	CALL productpricing();

##### 删除存储过程
	存储过程在创建之后，被保存在服务器上以供使用，直至被删除。删除命令（类似于第21章所介绍的语句）从服务器中删除存储过程。
		DROP PROCEDURE productpricing;

##### 使用参数
	CREATE PROCEDURE productpricing(
	OUT pl DECIMAL(8,2),
	OUT ph DECIMAL(8,2),
	OUT pa DECIMAL(8,2)
	)
	BEGIN
		SELECT MIN(prod_price)
		INTO pl
		FROM products;
		SELECT MAX(prod_price)
		INTO ph
		FROM products;
		SELECT AVG(prod_price)
		INTO pa
		FROM products;
	END;
	存储过程接受3个参数： pl存储产品最低价格， ph存储产品最高价格， pa存储产品平均价格。每个参数必须具有指定的类型，这里使用十进制值。
	关键字OUT指出相应的参数用来从存储过程传出一个值（返回给调用者）。 MySQL支持IN（传递给存储过程）、 OUT（从存储过程传出，如这里所用）和INOUT（对存储过程传入和传出）类型的参数。
	存储过程的代码位于BEGIN和END语句内，如前所见，它们是一系列SELECT语句，用来检索值，然后保存到相应的变量（通过指定INTO关键字）。
	# 调用
	CALL productpricing(@pricelow,@pricehigh,@priceaverage);
	变量名 所有MySQL变量都必须以@开始。
	调用时需要输入三个参数，存储过程将会对这三个变量进行赋值，然后这三个变量就会存储在内存中。可以用SELECT语句查询出来。
	SELECT @pricelow,@pricehigh,@priceaverage;
	
	# 使用IN，OUT参数
	CREATE PROCEDURE ordertotal(
		IN onumber INT,
		OUT ototal DECIMAL(8,2)
	)
	BEGIN
		SELECT SUM(item_price*quantity)
		FROM orderitems
		WHERE order_num = onumber
		INTO ototal;
	END;
	CALL ordertotal(20005, @total);
	
##### 高级存储过程
	CREATE PROCEDURE ordertotal(
		IN onumber INT,
		IN taxable BOOlEAN,
		OUT ototal DECIMAL(8,2)
	) COMMENT 'obtain order total, optionally adding tax'
	BEGIN
		DECLARE total DECIMAL(8,2);
		DECLARE taxrate INT DEFAULT 6;
		
		SELECT SUM(item_price*quantity)
		FROM orderitems
		WHERE order_num = onumber
		INTO total;
		
		IF taxable THEN
			SELECT total+(total/100*taxrate) INTO total;
		END IF;
		
		SELECT total INTO ototal;
	END;
	此存储过程有很大的变动。添加了另外一个参数taxable，它是一个布尔值（如果要增加税则为真，否则为假）。在存储过程体中，**用DECLARE语句定义了两个局部变量**。 DECLARE要求指定变量名和数据类型，它也支持可选的默认值（这个例子中的taxrate的默认被设置为6%）。 SELECT语句已经改变，因此其结果存储到total（局部变量）而不是ototal。 IF语句检查taxable是否为真，如果为真，则用另一SELECT语句增加营业税到局部变量total。最后，用另一SELECT语句将total（它增加或许不增加营业税）保存到ototal
	CALL ordertotal(20005, 0, @total);
	SELECT @total;
	CALL ordertotal(20005, 1, @total);
	SELECT @total;

##### 检查存储过程
	为显示用来创建一个存储过程的CREATE语句，使用SHOW CREATE PROCEDURE语句：
	为了获得包括何时、由谁创建等详细信息的存储过程列表， 使用SHOW PROCEDURE STATUS。